# Detection模型上传到Hugging Face指南

**模型信息**:
- 文件: `best_model.pt` (1.17GB)
- 基础模型: bert-base-chinese
- 任务: 情感检测（6类）
- 准确率: 91.47%

---

## 🚀 快速上传（3步完成）

### 方法1: 使用上传脚本（推荐）

#### 步骤1: 安装依赖
```bash
pip install huggingface_hub
```

#### 步骤2: 登录Hugging Face
```bash
huggingface-cli login
```
然后输入你的Token（从 https://huggingface.co/settings/tokens 获取）

#### 步骤3: 修改并运行上传脚本
```bash
# 1. 编辑 upload_to_huggingface.py
# 2. 将 REPO_NAME 改为 "你的用户名/longemotion-detection"
# 3. 运行
cd Detection
python upload_to_huggingface.py
```

---

### 方法2: 使用命令行（更简单）

#### 步骤1: 安装和登录
```bash
pip install huggingface_hub
huggingface-cli login
```

#### 步骤2: 直接上传
```bash
cd Detection

# 上传模型文件
huggingface-cli upload your-username/longemotion-detection model/best_model.pt best_model.pt

# 上传README
huggingface-cli upload your-username/longemotion-detection README.md README.md

# 上传脚本
huggingface-cli upload your-username/longemotion-detection scripts/inference_longemotion.py inference_longemotion.py
```

**注意**: 将 `your-username` 替换为你的Hugging Face用户名

---

### 方法3: 使用Web界面

#### 步骤1: 创建仓库
1. 访问 https://huggingface.co/new
2. 创建新模型仓库，命名如 `longemotion-detection`

#### 步骤2: 上传文件
1. 进入仓库页面
2. 点击 "Files and versions"
3. 点击 "Add file" -> "Upload files"
4. 上传 `model/best_model.pt`
5. 上传其他文件（README等）

---

## 📝 创建模型卡片（README.md）

在Hugging Face仓库中创建一个好的README非常重要。以下是模板：

```markdown
---
language: zh
license: apache-2.0
tags:
- emotion-detection
- sentiment-analysis
- chinese
- bert
datasets:
- dair-ai/emotion
metrics:
- accuracy
model-index:
- name: LongEmotion-Detection
  results:
  - task:
      type: text-classification
      name: Emotion Detection
    metrics:
    - type: accuracy
      value: 0.9147
      name: Validation Accuracy
---

# LongEmotion Detection Model

## 模型描述

这是一个基于BERT的中文情感检测模型，用于LongEmotion比赛的Detection任务。

**任务**: 在长文本的多个段落中，找出表达独特情感的段落。

## 模型性能

- **验证准确率**: 91.47%
- **平均置信度**: 89.27%
- **基础模型**: bert-base-chinese
- **情感类别**: 6类 (sadness, joy, love, anger, fear, surprise)

## 使用方法

\`\`\`python
import torch
from transformers import BertTokenizer

# 加载模型
model = torch.load("best_model.pt")
tokenizer = BertTokenizer.from_pretrained("bert-base-chinese")

# 推理示例
text = "你的文本"
encoding = tokenizer(text, return_tensors='pt', max_length=512, truncation=True)
with torch.no_grad():
    outputs = model(**encoding)
    predicted_class = torch.argmax(outputs, dim=-1)
\`\`\`

## 训练数据

- **数据集**: dair-ai/emotion (中文部分)
- **训练样本**: 12,800条
- **验证样本**: 3,200条

## 限制和偏见

- 模型主要针对短文本情感分类训练
- 在非常长的文本上可能需要分段处理

## 引用

如果使用此模型，请引用：
\`\`\`
@misc{longemotion-detection,
  author = {Your Name},
  title = {LongEmotion Detection Model},
  year = {2025},
  publisher = {Hugging Face},
  howpublished = {\url{https://huggingface.co/your-username/longemotion-detection}}
}
\`\`\`
```

---

## ⚠️ 注意事项

### 文件大小
- `best_model.pt`: 1.17GB
- 上传时间取决于网络速度（可能需要10-30分钟）

### 仓库命名建议
- `longemotion-detection`
- `emotion-detection-chinese`
- `bert-chinese-emotion`

### 私有 vs 公开
- 公开仓库：任何人都可以下载使用
- 私有仓库：只有你能访问（需要Pro账号）

---

## 🔍 验证上传

上传后，访问：
```
https://huggingface.co/your-username/longemotion-detection
```

检查：
- ✅ 模型文件已上传
- ✅ README显示正确
- ✅ 可以下载模型

---

## 📥 下载使用

其他人可以这样使用你的模型：

```python
from huggingface_hub import hf_hub_download

# 下载模型
model_path = hf_hub_download(
    repo_id="your-username/longemotion-detection",
    filename="best_model.pt"
)

# 加载模型
import torch
model = torch.load(model_path)
```

---

## 🆘 常见问题

**Q: Token在哪里获取？**
A: https://huggingface.co/settings/tokens -> Create new token

**Q: 上传很慢怎么办？**
A: 可以使用Git LFS方式上传大文件

**Q: 如何更新模型？**
A: 重新运行上传脚本即可覆盖旧文件

---

**准备好了吗？开始上传吧！** 🚀

