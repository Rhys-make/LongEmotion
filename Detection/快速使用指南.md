# ğŸš€ LongEmotion æ¯”èµ›æ–‡ä»¶ - å¿«é€Ÿä½¿ç”¨æŒ‡å—

**æœ€åæ›´æ–°**: 2025-10-27  
**çŠ¶æ€**: âœ… å·²å®Œæˆæ¨ç†ï¼Œå¯æäº¤

---

## ğŸ“ æ–‡ä»¶è¯´æ˜

```
COMPETITION_FILES/
â”œâ”€â”€ model/
â”‚   â””â”€â”€ best_model.pt              # è®­ç»ƒå¥½çš„æ¨¡å‹ï¼ˆ91.47%å‡†ç¡®ç‡ï¼‰
â”‚
â”œâ”€â”€ test_data/
â”‚   â””â”€â”€ test.jsonl                 # æµ‹è¯•é›†ï¼ˆ136ä¸ªæ ·æœ¬ï¼‰
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ run_inference_final.py     # ä¸»è¿è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ inference_longemotion.py   # æ¨ç†æ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ convert_submission_format.py # æ ¼å¼è½¬æ¢
â”‚   â””â”€â”€ detection_model.py         # æ¨¡å‹å®šä¹‰
â”‚
â”œâ”€â”€ submission/
â”‚   â””â”€â”€ Emotion_Detection_Result.jsonl  # ğŸ“¤ æäº¤æ–‡ä»¶
â”‚
â””â”€â”€ reports/
    â”œâ”€â”€ é¡¹ç›®æœ€ç»ˆè¿›åº¦æŠ¥å‘Š.md        # å®Œæ•´æŠ¥å‘Š
    â””â”€â”€ é¡¹ç›®è‡ªæŸ¥æŠ¥å‘Š.md            # è‡ªæŸ¥æŠ¥å‘Š
```

---

## ğŸ¯ æäº¤æ–‡ä»¶

### ğŸ“¤ ç«‹å³æäº¤
**æ–‡ä»¶è·¯å¾„**: `submission/Emotion_Detection_Result.jsonl`

**æ ¼å¼**:
```json
{"id": 0, "predicted_index": 24}
{"id": 1, "predicted_index": 4}
{"id": 2, "predicted_index": 11}
...
```

**ç»Ÿè®¡ä¿¡æ¯**:
- âœ… æ ·æœ¬æ•°: 136
- âœ… å¹³å‡ç½®ä¿¡åº¦: 89.27%
- âœ… æ ¼å¼æ­£ç¡®

---

## ğŸ”„ é‡æ–°è¿è¡Œæ¨ç†ï¼ˆå¦‚éœ€è¦ï¼‰

### æ­¥éª¤1: æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
```bash
# ä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
.\venv\Scripts\activate
```

### æ­¥éª¤2: è¿›å…¥Detectionæ–‡ä»¶å¤¹å¹¶è¿è¡Œæ¨ç†
```bash
cd Detection
python scripts/run_inference_final.py
```

**è¾“å‡º**: æ–°çš„é¢„æµ‹ç»“æœå°†ä¿å­˜åˆ° `submission/predictions.jsonl`

### æ­¥éª¤3: è½¬æ¢æ ¼å¼ï¼ˆå¦‚éœ€è¦ï¼‰
```bash
# åœ¨Detection/scriptsæ–‡ä»¶å¤¹å†…è¿è¡Œ
cd scripts
python convert_submission_format.py
```

**è¾“å‡º**: æäº¤æ ¼å¼æ–‡ä»¶ `submission/Emotion_Detection_Result.jsonl`

---

## ğŸ“Š æ¨¡å‹æ€§èƒ½

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| éªŒè¯å‡†ç¡®ç‡ | 91.47% |
| å¹³å‡ç½®ä¿¡åº¦ | 89.27% |
| æ¨ç†æ—¶é—´ | 5-10åˆ†é’Ÿ |
| æµ‹è¯•æ ·æœ¬ | 136ä¸ª |

### æƒ…æ„Ÿåˆ†å¸ƒ
- love: 40.4%
- surprise: 22.8%
- fear: 13.2%
- anger: 11.8%
- sadness: 10.3%
- joy: 1.5%

---

## ğŸ” æ–‡ä»¶è¯¦è§£

### model/best_model.pt
- **ç±»å‹**: PyTorchæ¨¡å‹æƒé‡
- **ç»“æ„**: BERT-base-chinese + Linearåˆ†ç±»å™¨
- **è®­ç»ƒæ•°æ®**: 12,800æ¡çŸ­æ–‡æœ¬
- **æ€§èƒ½**: 91.47%éªŒè¯å‡†ç¡®ç‡
- **ä½ç½®**: `Detection/model/best_model.pt`

### test_data/test.jsonl
- **æ ¼å¼**: LongEmotionæ ‡å‡†æ ¼å¼
- **æ ·æœ¬**: 136ä¸ªé•¿æ–‡æœ¬
- **ç‰¹ç‚¹**: æ¯ä¸ªæ ·æœ¬30-34ä¸ªæ®µè½
- **ä½ç½®**: `Detection/test_data/test.jsonl`

### submission/Emotion_Detection_Result.jsonl
- **æ ¼å¼**: `{"id": int, "predicted_index": int}`
- **è¯´æ˜**: 
  - `id`: æ ·æœ¬ç¼–å· (0-135)
  - `predicted_index`: é¢„æµ‹çš„ç‹¬ç‰¹æƒ…æ„Ÿæ®µè½ç´¢å¼•
- **ä½ç½®**: `Detection/submission/Emotion_Detection_Result.jsonl`

---

## âš™ï¸ æŠ€æœ¯ç»†èŠ‚

### æ¨ç†æµç¨‹
1. åŠ è½½è®­ç»ƒå¥½çš„BERTæ¨¡å‹ï¼ˆä» `model/best_model.pt`ï¼‰
2. è¯»å–æµ‹è¯•é›†ï¼ˆä» `test_data/test.jsonl`ï¼Œ136ä¸ªé•¿æ–‡æœ¬æ ·æœ¬ï¼‰
3. å¯¹æ¯ä¸ªæ ·æœ¬çš„æ‰€æœ‰æ®µè½é¢„æµ‹æƒ…æ„Ÿ
4. ç»Ÿè®¡æƒ…æ„Ÿåˆ†å¸ƒï¼Œæ‰¾å‡ºåªå‡ºç°1æ¬¡çš„ï¼ˆç‹¬ç‰¹ï¼‰
5. è¾“å‡ºè¯¥æ®µè½çš„ç´¢å¼•åˆ° `submission/` æ–‡ä»¶å¤¹

### æƒ…æ„Ÿç±»åˆ«ï¼ˆ6ç±»ï¼‰
- 0: sadness
- 1: joy
- 2: love
- 3: anger
- 4: fear
- 5: surprise

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜1: æ¨¡å‹åŠ è½½å¤±è´¥
**è§£å†³**: 
- ç¡®ä¿åœ¨Detectionæ–‡ä»¶å¤¹å†…è¿è¡Œè„šæœ¬
- è„šæœ¬ä¼šè‡ªåŠ¨ä½¿ç”¨ç›¸å¯¹è·¯å¾„å®šä½æ–‡ä»¶
- æ£€æŸ¥ `model/best_model.pt` æ–‡ä»¶æ˜¯å¦å­˜åœ¨

### é—®é¢˜2: ä¾èµ–ç¼ºå¤±
**è§£å†³**: 
```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒåå®‰è£…ä¾èµ–
pip install torch transformers tqdm
```

### é—®é¢˜3: å†…å­˜ä¸è¶³
**è§£å†³**: è„šæœ¬é»˜è®¤ä½¿ç”¨CPUï¼Œå†…å­˜éœ€æ±‚è¾ƒä½ï¼ˆçº¦2-4GBï¼‰

### é—®é¢˜4: æ‰¾ä¸åˆ°æ–‡ä»¶
**è§£å†³**: 
- ç¡®ä¿å½“å‰ç›®å½•åœ¨ `Detection` æ–‡ä»¶å¤¹
- ä½¿ç”¨ `cd Detection` è¿›å…¥æ–‡ä»¶å¤¹
- æ£€æŸ¥æ–‡ä»¶ç»“æ„æ˜¯å¦å®Œæ•´

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. âœ… æäº¤æ–‡ä»¶å·²ç”Ÿæˆåœ¨ `submission/Emotion_Detection_Result.jsonl`
2. âš ï¸ è¿è¡Œè„šæœ¬æ—¶å¿…é¡»åœ¨ `Detection` æ–‡ä»¶å¤¹å†…ï¼ˆæˆ–å…¶å­æ–‡ä»¶å¤¹ï¼‰
3. âš ï¸ å¦‚éœ€é‡æ–°æ¨ç†ï¼Œç¡®ä¿è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»
4. âš ï¸ æ¨¡å‹æ–‡ä»¶è¾ƒå¤§ï¼ˆ~400MBï¼‰ï¼Œè¯·å‹¿åˆ é™¤ `model/best_model.pt`
5. âœ… æ‰€æœ‰è·¯å¾„å·²æ›´æ–°ä¸ºDetectionæ–‡ä»¶å¤¹å†…çš„ç›¸å¯¹è·¯å¾„

---

## ğŸ“ å­¦ä¹ èµ„æº

- **æ¨¡å‹æ¶æ„**: scripts/detection_model.py
- **æ¨ç†é€»è¾‘**: scripts/inference_longemotion.py
- **å®Œæ•´æŠ¥å‘Š**: reports/é¡¹ç›®æœ€ç»ˆè¿›åº¦æŠ¥å‘Š.md

---

## âœ… æ£€æŸ¥æ¸…å•

æäº¤å‰ç¡®è®¤:
- [ ] æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼ˆæ¯è¡Œä¸€ä¸ªJSONå¯¹è±¡ï¼‰
- [ ] åŒ…å«136è¡Œï¼ˆå¯¹åº”136ä¸ªæµ‹è¯•æ ·æœ¬ï¼‰
- [ ] `id`å­—æ®µä»0åˆ°135
- [ ] `predicted_index`æ˜¯æ•´æ•°
- [ ] æ–‡ä»¶ç¼–ç UTF-8

---

## ğŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

æŸ¥çœ‹:
1. `reports/é¡¹ç›®æœ€ç»ˆè¿›åº¦æŠ¥å‘Š.md` - å®Œæ•´æŠ€æœ¯æŠ¥å‘Š
2. `reports/é¡¹ç›®è‡ªæŸ¥æŠ¥å‘Š.md` - é¡¹ç›®è‡ªæŸ¥è¯´æ˜
3. `README.md` - å¿«é€Ÿæ¦‚è§ˆ
4. `scripts/` - æŸ¥çœ‹æºä»£ç äº†è§£å®ç°ç»†èŠ‚

---

**ç¥æ‚¨æ¯”èµ›é¡ºåˆ©ï¼** ğŸ‰

